import{u as j,m as nt,S as W,n as ct,p as Vt,o as At,q as Jt,r as Qt,d as y,j as ft,k as T,s as Ft,A as Ot,t as tt,v as lt,w as dt,x as Pt,y as xt,z as Dt,l as Mt,E as to,F as oo,H as eo,W as Lt,J as no,K as so,L as ao,N as io,a as X,Q as ro,G as A,R as co,V as Y,c as q,O as lo,U as ho,C as B,X as Et,Y as Nt,P as uo}from"./three-vendor-Cterq954.js";import{i as po,c as mo,a as fo,b as Wt,d as Mo,e as wo,f as go,g as yo,h as wt,j as Tt,k as So,l as gt,m as yt,n as vo,u as ko,o as bo,p as Co}from"./foliage-D5enixo7.js";import{A as Po}from"./audio-CxwEYowo.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const e of n)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const e={};return n.integrity&&(e.integrity=n.integrity),n.referrerPolicy&&(e.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?e.credentials="include":n.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(n){if(n.ep)return;n.ep=!0;const e=r(n);fetch(n.href,e)}})();const Ht=j(nt(8900331)),Kt=j(nt(16758465));function xo(){const t=new W(1e3,32,15),a=ct(33),r=ct(.6),n=Vt.add(a).normalize().y.max(0).pow(r).max(0),e=At(Kt,Ht,n),o=new Jt;return o.colorNode=e,o.side=Qt,new y(t,o)}const Q=j(0),Bt=j(nt(16777215));function Lo(t=2e3){const a=new ft,r=new Float32Array(t*3),l=new Float32Array(t),n=new Float32Array(t),e=400;for(let P=0;P<t;P++){const F=Math.random(),K=Math.random(),Ct=2*Math.PI*F,at=Math.acos(2*K-1),it=e*(.9+Math.random()*.2),qt=it*Math.sin(at)*Math.cos(Ct),jt=it*Math.sin(at)*Math.sin(Ct),$t=it*Math.cos(at);r[P*3]=qt,r[P*3+1]=Math.abs(jt),r[P*3+2]=$t,l[P]=Math.random()*1.5+.5,n[P]=Math.random()*100}a.setAttribute("position",new T(r,3)),a.setAttribute("size",new T(l,1)),a.setAttribute("offset",new T(n,1));const o=new Ft({size:1,transparent:!0,opacity:0,blending:Ot,depthWrite:!1}),s=tt("offset","float"),i=tt("size","float"),h=lt.add(s).sin().mul(.5).add(.5).add(Q),d=At(nt(16777215),Bt,Q.mul(.8));o.colorNode=d,o.sizeNode=i.mul(h.max(.2));const M=dt,f=Q.mul(50),S=M.add(M.normalize().mul(f)),C=lt.mul(.1),L=S.x.mul(Pt(C)).sub(S.z.mul(xt(C))),v=S.x.mul(xt(C)).add(S.z.mul(Pt(C)));o.positionNode=Dt(L,S.y,v);const E=new Mt(a,o);return E.userData.isStars=!0,E}const Z={colors:{sky:8900331,ground:10025880,fog:16758465,light:16777215}},Eo=document.querySelector("#glCanvas"),b=new to;b.fog=new oo(Z.colors.fog,20,100);const Io=xo();b.add(Io);const ht=Lo();b.add(ht);const Ut=new Po;let N=!1,O=0;const m=new eo(60,window.innerWidth/window.innerHeight,.1,1e3);m.position.set(0,5,0);if(!Lt.isAvailable()){const t=Lt.getErrorMessage();throw document.body.appendChild(t),new Error("WebGPU not supported")}const H=new no({canvas:Eo,antialias:!0});H.setSize(window.innerWidth,window.innerHeight);H.setPixelRatio(window.devicePixelRatio);H.toneMapping=so;H.toneMappingExposure=1;const Zt=new ao(Z.colors.sky,Z.colors.ground,1);b.add(Zt);const I=new io(Z.colors.light,.8);I.position.set(50,80,30);I.castShadow=!0;I.shadow.mapSize.width=2048;I.shadow.mapSize.height=2048;I.shadow.camera.near=.5;I.shadow.camera.far=200;I.shadow.camera.left=-100;I.shadow.camera.right=100;I.shadow.camera.top=100;I.shadow.camera.bottom=-100;I.shadow.bias=-5e-4;b.add(I);function R(t){return new X({color:t,metalness:0,roughness:.8,flatShading:!1})}const w={ground:R(Z.colors.ground),trunk:R(9132587),leaves:[R(16738740),R(8900331),R(14524637),R(16766720)],mushroomStem:R(16113331),mushroomCap:[R(16737095),R(14315734),R(16752762)],eye:new X({color:0,roughness:.1}),mouth:new X({color:3355443,roughness:.5}),cloud:new X({color:16777215,roughness:.3,transparent:!0,opacity:.9}),drivableMushroomCap:R(49151)},$=[],St=new ro(300,300,64,64),V=St.attributes.position;for(let t=0;t<V.count;t++){const a=V.getX(t),r=V.getY(t),l=Math.sin(a*.05)*2+Math.cos(r*.05)*2;V.setZ(t,l)}St.computeVertexNormals();const vt=new y(St,w.ground);vt.rotation.x=-Math.PI/2;vt.receiveShadow=!0;b.add(vt);function g(t,a){return Math.sin(t*.05)*2+Math.cos(-a*.05)*2}const _=new A;b.add(_);po(b,1e4);function Ro(t,a){const r=g(t,a),l=new A;l.position.set(t,r,a);const n=3+Math.random()*2,e=.5,o=new q(.3,e,n,16),s=new y(o,w.trunk);s.position.y=n/2,s.castShadow=!0,s.receiveShadow=!0,l.add(s);const i=1.5+Math.random(),c=new W(i,32,32),h=Math.floor(Math.random()*w.leaves.length),d=new y(c,w.leaves[h]);d.position.y=n+i*.8,d.castShadow=!0,d.receiveShadow=!0,l.add(d),_.add(l),$.push({position:new Y(t,r,a),radius:.8})}const ot=new W(.05,16,16);function _t(t,a,r={}){const l=g(t,a),n=new A;n.position.set(t,l,a);const e=1.5+Math.random(),o=.3+Math.random()*.2,s=new q(o*.8,o,e,16),i=new y(s,w.mushroomStem);i.castShadow=!0,n.add(i);const c=o*3+Math.random(),h=new W(c,32,32,0,Math.PI*2,0,Math.PI/2);let d,M=!1;if(r.drivable)d=w.drivableMushroomCap,M=!0;else{const P=Math.floor(Math.random()*w.mushroomCap.length);d=w.mushroomCap[P]}const f=new y(h,d);f.position.y=e;const S=new A;S.position.set(0,e*.6,o*.95);const C=new y(ot,w.eye);C.position.set(-.15,.1,0);const L=new y(ot,w.eye);L.position.set(.15,.1,0);const v=new Nt(.12,.03,6,12,Math.PI),E=new y(v,w.mouth);return E.rotation.z=Math.PI,E.position.set(0,-.05,0),S.add(C,L,E),n.add(S),n.add(f),_.add(n),$.push({position:new Y(t,l,a),radius:o*2}),{mesh:n,type:"mushroom",speed:Math.random()*.02+.01,offset:Math.random()*100,drivable:M}}const Xt=[];function Yt(){const t=new A,a=3+Math.floor(Math.random()*3);for(let r=0;r<a;r++){const l=2+Math.random()*2,n=new W(l,16,16),e=new y(n,w.cloud);e.position.set((Math.random()-.5)*l*1.5,(Math.random()-.5)*l*.5,(Math.random()-.5)*l*1.5),t.add(e)}return t}const D=[16738740,16766720,8388564,16747520,14315734,8900346,16737095,12211667,14204888,16758725],zo=[7048739,10145074,5597999,2263842,3329330,64154],It=[16738740,16766720,16737095,14315734,8900346,9055202],Rt=[3329330,2263842,7048739,10145074,32896],J=[16758725,15132410,11393254,10025880,16777184,16767673],ut=new A;_.add(ut);const G=[],st=[],Go=2500;function x(t,a=!1,r=1){G.length>Go||(t.parent!==_&&t.parent!==ut&&t.parent!==b&&ut.add(t),G.push(t),a&&$.push({position:t.position.clone(),radius:r}))}function Ao(t,a){const r=Math.random();let l=10+Math.floor(Math.random()*10),n=15+Math.random()*10;if(r<.3)for(let e=0;e<l*2;e++){const o=Math.random()*n,s=Math.random()*Math.PI*2,i=t+o*Math.cos(s),c=a+o*Math.sin(s),h=g(i,c);if(Math.random()<.7)fo(i,h,c);else{const d=D[Math.floor(Math.random()*D.length)],M=["simple","multi","spiral"][Math.floor(Math.random()*3)],f=Wt({color:d,shape:M});f.position.set(i,h,c),x(f)}}else if(r<.5){l=5+Math.floor(Math.random()*3);for(let e=0;e<l;e++){const o=Math.random()*n,s=Math.random()*Math.PI*2,i=t+o*Math.cos(s),c=a+o*Math.sin(s);if(Math.random()<.4)Ro(i,c);else{const h=It[Math.floor(Math.random()*It.length)],d=Mo({color:h});d.position.set(i,g(i,c),c),x(d,!0,1.5)}}for(let e=0;e<l*2;e++){const o=Math.random()*n,s=Math.random()*Math.PI*2,i=t+o*Math.cos(s),c=a+o*Math.sin(s),h=Rt[Math.floor(Math.random()*Rt.length)],d=wo({color:h});d.position.set(i,g(i,c),c),x(d,!0,.8)}}else if(r<.65)for(let e=0;e<l;e++){const o=Math.random()*n,s=Math.random()*Math.PI*2,i=t+o*Math.cos(s),c=a+o*Math.sin(s),h=Math.random();if(h<.3){const d=_t(i,c);st.push(d)}else if(h<.6){const d=go(i,c);x(d)}else{const d=yo(i,c);x(d)}}else if(r<.75){for(let e=0;e<5;e++){const o=Math.random()*n,s=Math.random()*Math.PI*2,i=t+o*Math.cos(s),c=a+o*Math.sin(s),h=J[Math.floor(Math.random()*J.length)],d=wt({color:h});d.position.set(i,g(i,c),c),x(d,!0,1.2)}for(let e=0;e<10;e++){const o=Math.random()*n,s=Math.random()*Math.PI*2,i=t+o*Math.cos(s),c=a+o*Math.sin(s),h=D[Math.floor(Math.random()*D.length)],d=Tt({color:h});d.position.set(i,g(i,c),c),x(d)}}else if(r<.9)for(let e=0;e<8;e++){const o=Math.random()*n,s=Math.random()*Math.PI*2,i=t+o*Math.cos(s),c=a+o*Math.sin(s),h=So();h.position.set(i,g(i,c),c),x(h,!0,1)}else{for(let e=0;e<12;e++){const o=Math.random()*n,s=Math.random()*Math.PI*2,i=t+o*Math.cos(s),c=a+o*Math.sin(s);if(Math.random()<.5){const h=J[Math.floor(Math.random()*J.length)],d=gt({color:h});d.position.set(i,g(i,c),c),x(d)}else{const h=D[Math.floor(Math.random()*D.length)],d=yt({color:h});d.position.set(i,g(i,c),c),x(d)}}for(let e=0;e<3;e++){const o=Math.random()*n,s=Math.random()*Math.PI*2,i=t+o*Math.cos(s),c=a+o*Math.sin(s),h=vo({color:16729344});h.position.set(i,g(i,c),c),x(h,!0,1)}}}const Fo=60;for(let t=0;t<Fo;t++){const a=(Math.random()-.5)*260,r=(Math.random()-.5)*260;Ao(a,r)}const kt=[];for(let t=0;t<25;t++){const r=Math.random()>.6?mo({rainIntensity:100}):Yt();r.position.set((Math.random()-.5)*200,25+Math.random()*10,(Math.random()-.5)*200),b.add(r),r.userData?.animationType==="rain"?(G.push(r),kt.push(r)):Xt.push({mesh:r,speed:Math.random()*.05+.02})}const U=new co(m,document.body),bt=document.getElementById("instructions");bt.addEventListener("click",function(){U.lock()});U.addEventListener("lock",function(){bt.style.display="none"});U.addEventListener("unlock",function(){bt.style.display="flex"});document.addEventListener("contextmenu",t=>t.preventDefault());const rt=document.getElementById("musicUpload");if(rt){rt.addEventListener("change",a=>{a.target.files.length>0&&Ut.loadModule(a.target.files[0])}),rt.addEventListener("click",a=>a.stopPropagation());const t=document.querySelector('label[for="musicUpload"]');t&&t.addEventListener("click",a=>a.stopPropagation())}const zt=document.getElementById("toggleDayNight");zt&&zt.addEventListener("click",t=>{t.stopPropagation(),N=!N});document.addEventListener("keydown",t=>{t.code==="KeyN"&&(N=!N)});const u={forward:!1,backward:!1,left:!1,right:!1,jump:!1,sneak:!1,sprint:!1},Oo=function(t){switch(t.ctrlKey&&t.code!=="ControlLeft"&&t.code!=="ControlRight"&&t.preventDefault(),t.code){case"KeyW":break;case"KeyA":u.left=!0;break;case"KeyS":u.backward=!0;break;case"KeyD":u.right=!0;break;case"Space":u.jump=!0;break;case"ControlLeft":case"ControlRight":u.sneak=!0,t.preventDefault();break;case"ShiftLeft":case"ShiftRight":u.sprint=!0;break}},Do=function(t){switch(t.code){case"KeyW":break;case"KeyA":u.left=!1;break;case"KeyS":u.backward=!1;break;case"KeyD":u.right=!1;break;case"Space":u.jump=!1;break;case"ControlLeft":case"ControlRight":u.sneak=!1;break;case"ShiftLeft":case"ShiftRight":u.sprint=!1;break}},No=function(t){t.button===2&&(u.forward=!0)},Wo=function(t){t.button===2&&(u.forward=!1)};document.addEventListener("keydown",Oo);document.addEventListener("keyup",Do);document.addEventListener("mousedown",No);document.addEventListener("mouseup",Wo);const p={velocity:new Y,direction:new Y,sneakSpeed:10,runSpeed:30,sprintSpeed:50,currentSpeed:30,acceleration:20,gravity:20,jumpStrength:10,height:1.8};let z=null,pt=null;function To(){let t=1/0,a=null;const r=m.position;return st.forEach(l=>{if(l.type==="mushroom"&&l.drivable){const n=l.mesh.position,e=r.x-n.x,o=r.z-n.z,s=Math.sqrt(e*e+o*o);s<t&&(t=s,a=l)}}),a}function Ho(t){z=t,pt=m.position.clone(),m.position.copy(t.mesh.position)}function Ko(){pt&&m.position.copy(pt),z=null}document.addEventListener("keydown",t=>{if(t.code==="KeyM")if(z)Ko();else{const a=To();a&&Ho(a)}});let k=null,et=!1,mt=null;function Bo(){k||(k=Yt(),k.position.set(m.position.x,m.position.y+10,m.position.z),b.add(k),mt=m.position.clone(),m.position.copy(k.position))}function Uo(){k&&(b.remove(k),k=null,et=!1,mt&&m.position.copy(mt))}function Zo(){et=!et}document.addEventListener("keydown",t=>{t.code==="KeyC"&&(k?Uo():Bo()),t.code==="KeyR"&&k&&Zo()});function _o(t,a=8900331){const l=new ft,n=new Float32Array(2e3*3),e=new Float32Array(2e3),o=new Float32Array(2e3);for(let v=0;v<2e3;v++)n[v*3]=(Math.random()-.5)*2,n[v*3+1]=0,n[v*3+2]=(Math.random()-.5)*2,e[v]=1+Math.random()*2,o[v]=Math.random()*t;l.setAttribute("position",new T(n,3)),l.setAttribute("aSpeed",new T(e,1)),l.setAttribute("aOffset",new T(o,1));const s=new Ft({color:a,size:.4,transparent:!0,opacity:.8,blending:Ot}),i=tt("aSpeed","float"),c=tt("aOffset","float"),h=j(1);s.uSpeed=h;const d=lt.mul(h),M=ct(t),C=c.add(i.mul(d)).mod(M).negate();s.positionNode=Dt(dt.x,C,dt.z);const L=new Mt(l,s);return L.userData={animationType:"gpuWaterfall"},L}function Xo(t,a,r=8){const l=g(t,a),n=new A;n.position.set(t,l,a);const e=(1.5+Math.random())*r,o=(.3+Math.random()*.2)*r,s=new q(o*.8,o,e,16),i=new y(s,w.mushroomStem);i.castShadow=!0,n.add(i);const c=o*3+Math.random()*r,h=new W(c,32,32,0,Math.PI*2,0,Math.PI/2),d=Math.floor(Math.random()*w.mushroomCap.length),M=w.mushroomCap[d],f=new y(h,M);f.position.y=e;const S=new A;S.position.set(0,e*.6,o*.95),S.scale.set(r,r,r);const C=new y(ot,w.eye);C.position.set(-.15,.1,0);const L=new y(ot,w.eye);L.position.set(.15,.1,0);const v=new Nt(.12,.03,6,12,Math.PI),E=new y(v,w.mouth);E.rotation.z=Math.PI,E.position.set(0,-.05,0),S.add(C,L,E),n.add(S),n.add(f),_.add(n),$.push({position:new Y(t,l,a),radius:o*1.2});const P={mesh:n,type:"mushroom",speed:Math.random()*.02+.01,offset:Math.random()*100,drivable:!1};n.userData.type="mushroom",st.push(P),G.push(n)}function Yo(t={}){const{color:a=5592405,rainIntensity:r=200}=t,l=new A,n=new W(4.5,32,32),e=w.cloud.clone();e.color.setHex(a);const o=new y(n,e);o.castShadow=!0,l.add(o);const s=new ft,i=new Float32Array(r*3);for(let d=0;d<r;d++)i[d*3]=(Math.random()-.5)*9,i[d*3+1]=Math.random()*-6,i[d*3+2]=(Math.random()-.5)*9;s.setAttribute("position",new T(i,3));const c=new uo({color:8900331,size:.05}),h=new Mt(s,c);return l.add(h),l.userData.animationType="rain",l}function qo(t,a){console.log(`Spawning King Mushroom at ${t}, ${a}`);const r=12,l=2.5*r,n=.4*r,e=1.5*r,o=new A;o.position.set(t,g(t,a),a);const s=new y(new q(n*.8,n,l,32),w.mushroomStem);s.position.y=l/2,s.castShadow=!0,o.add(s);const i=new y(new W(e,32,32,0,Math.PI*2,0,Math.PI/2),w.mushroomCap[0]);i.position.y=l,o.add(i);const c=new q(e*.8,e*.8,.5,32),h=new X({color:39423,roughness:.1,metalness:.5}),d=new y(c,h);d.position.y=l+e*.2,o.add(d);const M=_o(l);M.position.set(0,l+.5,e*.8),o.add(M),$.push({position:o.position.clone(),radius:n*1.2}),b.add(o),G.push(M),window.kingMushroomCap=i,window.kingWaterfall=M;const f=new lo;f.position.set(t,0,a+e*.8),f.userData={animationType:"rain"},kt.push(f);for(let S=0;S<20;S++){const C=15+Math.random()*30,L=Math.random()*Math.PI*2,v=t+C*Math.cos(L),E=a+C*Math.sin(L),P=Math.random();let F;P<.33?F=wt({color:14315734}):P<.66?F=gt({color:8388564}):F=yt({color:16766720});const K=4+Math.random()*4;F.position.set(v,g(v,E),E),F.scale.set(K,K,K),x(F,!0,1*K)}}function jo(t,a){console.log(`Spawning Overgrown Zone at ${t}, ${a}`);const r=50;for(let l=0;l<3;l++){const n=Yo({rainIntensity:200,color:5592405});n.position.set(t+(Math.random()-.5)*30,60+Math.random()*10,a+(Math.random()-.5)*30),b.add(n),G.push(n)}for(let l=0;l<15;l++){const n=Math.random()*r,e=Math.random()*Math.PI*2,o=t+n*Math.cos(e),s=a+n*Math.sin(e);Xo(o,s,8+Math.random()*7)}for(let l=0;l<30;l++){const n=Math.random()*r,e=Math.random()*Math.PI*2,o=t+n*Math.cos(e),s=a+n*Math.sin(e),i=g(o,s),c=Math.random();let h,d;c<.4?(h=gt({color:65280}),d=5+Math.random()*5):c<.7?(h=yt({color:16711935}),d=4+Math.random()*4):(h=wt({color:49151}),d=3+Math.random()*3),h.position.set(o,i,s),h.scale.set(d,d,d),x(h,!0,1*d)}}jo(-100,-100);qo(-100,-100);const Gt=new ho;async function $o(){const t=Gt.getDelta(),a=Gt.getElapsedTime(),r=Ut.update();O+=((N?1:0)-O)*t*2,Ht.value.lerpColors(new B(8900331),new B(0),O),Kt.value.lerpColors(new B(16758465),new B(0),O);const n=new B(Z.colors.fog),e=new B(328976);if(b.fog.color.lerpColors(n,e,O),I.intensity=Et.lerp(.8,0,O),Zt.intensity=Et.lerp(1,.02,O),ht.material&&(ht.material.opacity=O),r&&N){Q.value=r.kickTrigger;const o=(a*.1+r.beatPhase)%1;Bt.value.setHSL(o,1,.8)}if(window.kingMushroomCap&&r){const o=r.kickTrigger||0,s=r.grooveAmount||0,i=1+o*.3;window.kingMushroomCap.scale.setScalar(i),window.kingWaterfall&&window.kingWaterfall.material&&window.kingWaterfall.material.uSpeed&&(window.kingWaterfall.material.uSpeed.value=1+s*5)}if(ko(r,N),U.isLocked){let o=p.runSpeed;if(u.sneak&&(o=p.sneakSpeed),u.sprint&&(o=p.sprintSpeed),p.currentSpeed<o&&(p.currentSpeed+=p.acceleration*t),p.currentSpeed>o&&(p.currentSpeed-=p.acceleration*t),p.velocity.x-=p.velocity.x*10*t,p.velocity.z-=p.velocity.z*10*t,p.velocity.y-=p.gravity*t,p.direction.z=Number(u.forward)-Number(u.backward),p.direction.x=Number(u.right)-Number(u.left),p.direction.normalize(),(u.forward||u.backward)&&(p.velocity.z-=p.direction.z*p.currentSpeed*t),(u.left||u.right)&&(p.velocity.x-=p.direction.x*p.currentSpeed*t),u.jump&&m.position.y<=g(m.position.x,m.position.z)+p.height+.5&&(p.velocity.y=p.jumpStrength),!z&&!k){U.moveRight(-p.velocity.x*t),U.moveForward(-p.velocity.z*t),m.position.y+=p.velocity.y*t;const s=g(m.position.x,m.position.z);m.position.y<s+p.height&&(p.velocity.y=0,m.position.y=s+p.height)}}if(z){let o=10*t,s=0,i=0;u.forward&&(i-=o),u.backward&&(i+=o),u.left&&(s-=o),u.right&&(s+=o),z.mesh.position.x+=s,z.mesh.position.z+=i,m.position.copy(z.mesh.position);const c=g(z.mesh.position.x,z.mesh.position.z);z.mesh.position.y=c}if(k){let o=15*t,s=0,i=0,c=0;u.forward&&(c-=o),u.backward&&(c+=o),u.left&&(s-=o),u.right&&(s+=o),u.jump&&(i+=o),u.sneak&&(i-=o),k.position.x+=s,k.position.y+=i,k.position.z+=c,m.position.copy(k.position)}G.forEach(o=>{bo(o,a,r,!N)}),Xt.forEach(o=>{o.mesh.position.x+=o.speed,o.mesh.position.x>120&&(o.mesh.position.x=-120)}),kt.forEach(o=>{if(o.position.x+=.01,o.position.x>120&&(o.position.x=-120),et||o.userData.animationType==="rain"){for(let s=0;s<5&&G.length!==0;s++){const i=Math.floor(Math.random()*G.length),c=G[i];if(c.userData.animationType==="rain")continue;const h=c.position.x-o.position.x,d=c.position.z-o.position.z;h*h+d*d<25&&c.scale.y<2&&c.scale.multiplyScalar(1.002)}if(Math.random()<.02){const s=Math.random()*4,i=Math.random()*Math.PI*2,c=o.position.x+s*Math.cos(i),h=o.position.z+s*Math.sin(i),d=g(c,h);if(Math.random()<.2){const M=_t(c,h);st.push(M)}else{const M=Math.floor(Math.random()*3);let f;M===0?f=Co({color:zo[0]}):M===1?f=Wt({color:D[0]}):f=Tt({color:D[1]}),f.position.set(c,d,h),f.scale.set(.1,.1,.1),x(f)}}}}),await H.renderAsync(b,m)}H.setAnimationLoop($o);window.addEventListener("resize",()=>{m.aspect=window.innerWidth/window.innerHeight,m.updateProjectionMatrix(),H.setSize(window.innerWidth,window.innerHeight)});
